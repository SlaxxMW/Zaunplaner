<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<title>Zaunteam Zaunplaner v1.4.11</title>
<style>
  :root{
    --bg:#f2f3f5;
    --panel:#ffffff;
    --text:#000000;
    --muted:#000000;
    --line:#d7d7d7;

    /* Zaunteam Logo Farben (aus Logo-Sampling) */
    --zt-green:#5ba601;
    --zt-lime:#8cff01;
    --zt-red:#ff0000;
    --zt-burgundy:#8e0028;

    --gold:var(--zt-green);
    --good:var(--zt-lime);
    --bad:#ffb3b3;
    --warn:#ffe08a;

    --shadow:0 10px 30px rgba(0,0,0,.08);
  }
  *{box-sizing:border-box;}
  body{margin:0;background:linear-gradient(180deg, #f6f7f9 0%, #e6e9ee 100%); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
  .wrap{max-width:980px;margin:0 auto;padding:14px 12px 80px;}
  .top{display:flex;gap:10px;align-items:center;justify-content:space-between;}
  .brand h1{margin:0;font-size:18px;letter-spacing:.3px;}
  .sub{font-size:12px;color:var(--muted);}
  .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:#f7f7f7;font-size:12px;color:#000;}
  .pill.good{border-color:rgba(91,166,1,.55);background:rgba(140,255,1,.22);color:#000;}
  .tabs{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;}
  .tabBtn{border:1px solid var(--line);background:#ffffff;color:#000;padding:10px 12px;border-radius:14px;font-weight:800;font-size:13px;cursor:pointer;box-shadow:0 2px 10px rgba(0,0,0,.04);}
  .tabBtn.active{border-color:rgba(91,166,1,.9);box-shadow:0 0 0 2px rgba(140,255,1,.35) inset, 0 8px 24px rgba(0,0,0,.08);}
  .panel{background:var(--panel);border:1px solid var(--line);border-radius:18px;padding:12px;margin-top:12px;box-shadow:var(--shadow);}
  details{background:transparent;}
  summary{list-style:none;cursor:pointer;display:flex;align-items:center;justify-content:space-between;gap:10px;}
  summary::-webkit-details-marker{display:none;}
  .sep{height:1px;background:linear-gradient(90deg, rgba(0,0,0,0), rgba(91,166,1,.6), rgba(255,0,0,.45), rgba(0,0,0,0));margin:10px 0;}
  label{display:block;font-size:12px;color:#000;margin:0 0 6px;font-weight:700;}
  input,select,textarea{width:100%;background:#fff;border:1px solid var(--line);color:#000;border-radius:14px;padding:10px 12px;font-size:14px;outline:none;}
  textarea{min-height:84px;resize:vertical;}
  input:focus,select:focus,textarea:focus{border-color:rgba(215,181,109,.7);box-shadow:0 0 0 2px rgba(215,181,109,.12);}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
  .grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;}
  @media(max-width:720px){.grid2,.grid3{grid-template-columns:1fr;}}
  .row{display:flex;gap:10px;align-items:center;}
  .tight{gap:8px;}
  .btn{border:1px solid var(--line);background:linear-gradient(180deg, #ffffff, #f3f3f3);color:#000;padding:10px 12px;border-radius:14px;font-weight:800;cursor:pointer;box-shadow:0 6px 16px rgba(0,0,0,.06);}
  .btn.small{padding:8px 10px;border-radius:12px;font-size:13px;}
  .btn.primary{border:1px solid rgba(91,166,1,.55);background:linear-gradient(90deg, var(--zt-lime), var(--zt-green));color:#000;}
  .btn.good{border:1px solid rgba(91,166,1,.55);background:var(--zt-lime);color:#000;}
  .btn.bad{border:1px solid rgba(255,0,0,.55);background:var(--bad);color:#000;}
  .btn.mail{border:1px solid rgba(142,0,40,.65);background:linear-gradient(90deg, var(--zt-red), var(--zt-burgundy));color:#000;}
  .btnbar{display:flex;gap:10px;flex-wrap:wrap;}
  .hint{color:var(--muted);font-size:12px;line-height:1.35;}
  .cards{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px;}
  @media(max-width:720px){.cards{grid-template-columns:1fr;}}
  .card{background:#fff;border:1px solid var(--line);border-radius:16px;padding:12px;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,.06);}
  .card:hover{border-color:rgba(215,181,109,.45);}
  .cardTitle{display:flex;align-items:center;justify-content:space-between;gap:10px;}
  .cardTitle b{font-size:14px;}
  .meta{color:var(--muted);font-size:12px;margin-top:4px;}
  .kpi{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;}
  .kpi .pill b{color:#000;}
  .stepper{display:flex;gap:8px;align-items:center;}
  .stepper input{text-align:center;}
  .photoGrid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}
  @media(max-width:720px){.photoGrid{grid-template-columns:1fr;}}
  .ph{border:1px dashed rgba(215,181,109,.45);border-radius:16px;padding:10px;background:rgba(0,0,0,.25);}
  .ph img{width:100%;border-radius:12px;display:block;}
  .toast{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:rgba(0,0,0,.7);
    border:1px solid rgba(215,181,109,.4);color:var(--text);padding:10px 12px;border-radius:14px;max-width:92vw;z-index:9999;}
  .gold{color:var(--gold);}

  input::placeholder, textarea::placeholder{color:#555;opacity:1;}

  /* Gate Variants UI */
  #gateVariants{margin-top:10px;}
  .gateRows{display:flex;flex-direction:column;gap:8px;margin-top:8px;}
  .gateRow{display:grid;grid-template-columns:1.1fr 1.1fr .8fr auto;gap:8px;align-items:end;background:#fafafa;border:1px solid var(--line);
    border-radius:16px;padding:10px;box-shadow:0 4px 14px rgba(0,0,0,.05);}
  .gateRow .btn{padding:8px 10px;border-radius:12px;font-size:13px;}
  @media(max-width:720px){
    .gateRow{grid-template-columns:1fr 1fr;grid-auto-rows:auto;}
    .gateRow .gateAct{grid-column:2/3;justify-self:end;}
  }
  .gateHint{font-size:12px;color:#000;margin-top:6px;}
</style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <div class="brand">
      <h1>Zaunteam Zaunplaner <span class="gold">v1.4.11</span></h1>
      <div class="sub">Projekte â€¢ KundenÃ¼bersicht (WhatsApp) â€¢ Chef/Teamâ€‘Dokumentation â€¢ Offlineâ€‘fÃ¤hig</div>
    </div>
    <div class="pill" id="statusPill">bereit</div>
  </div>

  <div class="panel">
    <details open id="projDetails">
      <summary>
        <span>ğŸ“ Projekte</span>
        <span class="pill" id="projCountPill">0</span>
      </summary>
      <div class="sep"></div>

      <div class="grid3">
        <div>
          <label>Projektname (Kunde)</label>
          <input id="pName" placeholder="z.B. Kunde MÃ¼ller"/>
        </div>
        <div>
          <label>Erstellungsdatum</label>
          <input id="pCreated" type="date"/>
          <div style="margin-top:10px;">
            <label>AusfÃ¼hrung (Datum)</label>
            <input id="pDate" type="date"/>
          </div>
        </div>
        <div>
          <label>Telefon</label>
          <input id="pPhone" inputmode="tel" placeholder="+49 ..."/>
          <div style="margin-top:10px;">
            <label>Eâ€‘Mail</label>
            <input id="pEmail" type="email" placeholder="name@domain.de"/>
          </div>
        </div>
      </div>

      <div class="grid2" style="margin-top:10px;">
        <div>
          <label>Adresse Kunde</label>
          <input id="pAddr" placeholder="StraÃŸe, PLZ Ort"/>
        </div>
        <div>
          <label>Objektadresse (falls abweichend)</label>
          <input id="pObj" placeholder="StraÃŸe, PLZ Ort"/>
        </div>
      </div>

      <div class="btnbar" style="margin-top:10px;">
        <button class="btn primary" id="btnAdd">â• Projekt anlegen</button>
        <button class="btn" id="btnCall">ğŸ“ Anrufen</button>
        <button class="btn mail" id="btnMail">âœ‰ï¸ Eâ€‘Mail</button>
        <button class="btn bad" id="btnDel">ğŸ—‘ï¸ LÃ¶schen</button>
      </div>

      <div class="sep"></div>

      <div class="grid2">
        <div>
          <label>Sortierung</label>
          <select id="sortSel">
            <option value="name">Name (Aâ€‘Z)</option>
            <option value="date">AusfÃ¼hrungsdatum</option>
            <option value="created">Erstellungsdatum</option>
          </select>
        </div>
        <div>
          <label>Projekt auswÃ¤hlen</label>
          <select id="projSel"></select>
        </div>
      </div>

      <div class="cards" id="projCards"></div>
      <div class="hint" style="margin-top:10px;">Karte antippen â†’ Ã¶ffnet Kunde. Alle Daten bleiben beim Update erhalten (Migration v1.1â€“v1.3).</div>
    </details>
  </div>

  <div class="tabs">
    <button class="tabBtn active" data-tab="kunde">ğŸ‘¤ Kunde</button>
    <button class="tabBtn" data-tab="chef">ğŸ› ï¸ Chef / Team</button>
    <button class="tabBtn" data-tab="backup">ğŸ’¾ Backup</button>
  </div>

  <div class="panel tab" data-tab="kunde">
    <details open id="kundeCard">
      <summary>
        <span id="kundeTitle">ğŸ‘¤ Kunde</span>
        <span class="pill" id="kundePill">leer</span>
      </summary>
      <div class="sep"></div>

      <div class="grid2">
        <div>
          <label>Erstellungsdatum</label>
          <input id="kCreated" type="date"/>
        </div>
        <div>
          <label>AusfÃ¼hrung (Datum)</label>
          <input id="kPlanned" type="date"/>
        </div>
      </div>

      <div class="grid2" style="margin-top:10px;">
        <div>
          <label>Telefon</label>
          <input id="kPhone" inputmode="tel" placeholder="+49 ..."/>
        </div>
        <div>
          <label>Eâ€‘Mail</label>
          <input id="kEmail" type="email" placeholder="name@domain.de"/>
        </div>
      </div>

      <div class="sep"></div>

      <div class="grid2">
        <div>
          <label>ZaunlÃ¤nge gesamt (m)</label>
          <input id="kLen" inputmode="decimal" placeholder="z.B. 18"/>
        </div>
        <div>
          <label>HÃ¶he</label>
          <select id="kHeight"></select>
        </div>
      </div>

      <div class="grid2" style="margin-top:10px;">
        <div>
          <label>System</label>
          <select id="kSystem">
            <option>Doppelstab</option>
            <option>Aluminium</option>
            <option>Holz</option>
            <option>WPC</option>
            <option>Diagonal Geflecht</option>
            <option>Tornado</option>
            <option>Elektrozaun</option>
          </select>
        </div>
        <div>
          <label>Farbe</label>
          <select id="kColor"></select>
        </div>
      </div>

      <div class="grid2" style="margin-top:10px;">
        <div>
          <label>Sichtschutz</label>
          <select id="kPrivacy">
            <option value="no">nein</option>
            <option value="yes">ja</option>
          </select>
        </div>
        <div>
          <label>Sichtschutzâ€‘LÃ¤nge (m)</label>
          <input id="kPrivacyLen" inputmode="decimal" placeholder="z.B. 10"/>
        </div>
      </div>
      <div class="hint" style="margin-top:6px;">Wenn nur ein Teil Sichtschutz bekommt: Meter eingeben. Leer = ganze LÃ¤nge.</div>

      <div class="grid2" style="margin-top:10px;">
        <div>
          <label>Holzart (nur bei Holz)</label>
          <select id="kWood"></select>
        </div>
        <div>
          <label>WPCâ€‘Variante (nur bei WPC)</label>
          <select id="kWpc"></select>
        </div>
      </div>

      <div class="grid2" style="margin-top:10px;">
        <div>
          <label>GelÃ¤nde</label>
          <select id="kSlopeType">
            <option value="flat">gerade</option>
            <option value="slope">abschÃ¼ssig</option>
            <option value="hang">am Hang</option>
            <option value="steep">steil</option>
          </select>
        </div>
        <div>
          <label>Neigung % (optional)</label>
          <input id="kSlopePct" inputmode="decimal" placeholder="z.B. 12"/>
        </div>
      </div>

      <div class="grid2" style="margin-top:10px;">
        <div>
          <label>Ecken (Anzahl)</label>
          <div class="stepper">
            <button class="btn small" id="kCornersMinus" type="button">âˆ’</button>
            <input id="kCorners" inputmode="numeric" value="0"/>
            <button class="btn small" id="kCornersPlus" type="button">+</button>
          </div>
        </div>
        <div>
          <label>Beton</label>
          <div class="row tight">
            <select id="kConcreteMode" style="flex:1;">
              <option value="sacks">SÃ¤cke</option>
              <option value="m3">mÂ³</option>
            </select>
            <input id="kConcreteVal" inputmode="decimal" placeholder="z.B. 18" style="flex:1;" readonly/>
          </div>
        </div>
      </div>
      <div class="hint" id="kConcreteAutoHint" style="margin-top:6px;"></div>
      <div class="sep"></div>
      
<div class="grid3">
  <div>
    <label>Torâ€‘Art</label>
    <select id="kGateType">
      <option value="none">kein Tor</option>
      <option value="gate1">1â€‘flÃ¼gelig</option>
      <option value="gate2">2â€‘flÃ¼gelig</option>
      <option value="gate3">3â€‘flÃ¼gelig</option>
      <option value="slide">Schiebetor</option>
    </select>
    <div class="gateHint">Tore als Varianten: HÃ¶he (Dropdown), Breite (Dropdown + editierbar), Menge (Dropdown). FÃ¼r mehrere GrÃ¶ÃŸen: â• Variante.</div>
  </div>
</div>

<div id="gateVariants" style="display:none;">
  <div class="btnbar" style="margin-top:8px;">
    <button class="btn good" id="btnGateAdd" type="button">â• Torâ€‘Variante</button>
    <button class="btn bad" id="btnGateClear" type="button">ğŸ§¹ Tore lÃ¶schen</button>
  </div>

  <datalist id="gateWidthList">
    <option value="80"></option>
    <option value="100"></option>
    <option value="125"></option>
    <option value="150"></option>
    <option value="200"></option>
  </datalist>

  <div class="gateRows" id="gateRows"></div>
</div>


      <div style="margin-top:10px;">
        <label>Notiz (optional)</label>
        <textarea id="kNote" placeholder="z.B. Besonderheiten / WÃ¼nscheâ€¦"></textarea>
      </div>

      <div class="kpi" id="kundeKpi"></div>

      <div class="sep"></div>
      <div class="btnbar">
        <button class="btn primary" id="btnKCalc">âœ… Berechnen & Ã¼bernehmen</button>
        <button class="btn good" id="btnKWhats">ğŸ“² WhatsAppâ€‘Text (Kunde)</button>
        <button class="btn" id="btnKCall">ğŸ“ Kunde anrufen</button>
        <button class="btn mail" id="btnKMail">âœ‰ï¸ Eâ€‘Mail senden</button>
        <button class="btn" id="btnKDown">â¬‡ï¸ Download Kunde.txt</button>
      </div>

      <div class="hint" style="margin-top:10px;">WhatsAppâ€‘Text ist sauber: Liste untereinander, keine leeren Felder.</div>
    </details>
  </div>

  <div class="panel tab" data-tab="chef" style="display:none;">
    <details open id="chefCard">
      <summary>
        <span id="chefTitle">ğŸ› ï¸ Chef / Team</span>
        <span class="pill" id="chefPill">leer</span>
      </summary>
      <div class="sep"></div>

      <div class="grid3">
        <div><label>Bagger</label><select id="cBagger"><option value="no">nein</option><option value="yes">ja</option></select></div>
        <div><label>Ramme</label><select id="cRamme"><option value="no">nein</option><option value="yes">ja</option></select></div>
        <div><label>HÃ¤nger</label><select id="cHaenger"><option value="no">nein</option><option value="yes">ja</option></select></div>
      </div>

      <div style="margin-top:10px;">
        <label>Kundenâ€‘Notiz (aus Kunde)</label>
        <textarea id="cCustomerNote" readonly placeholder="(keine Kundenâ€‘Notiz)"></textarea>
      </div>

      <div style="margin-top:10px;">
        <label>Interne Notiz / Baustellenhinweise</label>
        <textarea id="cNote" placeholder="Zugang, Parken, Fundament, Lieferhinweiseâ€¦"></textarea>
      </div>

      <div class="sep"></div>

      <details open>
        <summary><span>ğŸ§¾ Interne Materialliste (Team)</span><span class="pill" id="matPill">0</span></summary>
        <div class="sep"></div>

        <div class="grid2">
          <div>
            <label>Material</label>
            <input id="mName" placeholder="z.B. Pfosten 60x40"/>
          </div>
          <div>
            <label>Menge</label>
            <div class="row tight">
              <input id="mQty" inputmode="decimal" placeholder="z.B. 12" style="flex:1;"/>
              <select id="mUnit" style="flex:1;">
                <option>Stk</option><option>m</option><option>mÂ²</option><option>Sack</option><option>mÂ³</option><option>Paket</option>
              </select>
            </div>
          </div>
        </div>

        <div style="margin-top:10px;">
          <label>Notiz (grob, optional)</label>
          <textarea id="mNote" placeholder="Freitext / kurze Ãœbersichtâ€¦"></textarea>
        </div>

        <div class="btnbar" style="margin-top:10px;">
          <button class="btn primary" id="btnAddMat">â• HinzufÃ¼gen</button>
          <button class="btn" id="btnClearMat">ğŸ§½ Liste leeren</button>
        </div>

        <div id="matList" style="margin-top:10px;"></div>
      </details>

      <div class="sep"></div>

      <details open>
        <summary><span>ğŸ“¸ Fotos (Baustelle / Aufnahme)</span><span class="pill" id="photoPill">0</span></summary>
        <div class="sep"></div>
        <div class="photoGrid" id="photoGrid"></div>
        <div class="hint" style="margin-top:10px;">Fotos werden im Backup.json mitgesichert (komprimiert).</div>
      </details>

      <div class="sep"></div>
      <div class="btnbar">
        <button class="btn good" id="btnCWhats">ğŸ“² WhatsAppâ€‘Text (intern)</button>
        <button class="btn" id="btnCDown">â¬‡ï¸ Download Intern.txt</button>
      </div>
    </details>
  </div>

  <div class="panel tab" data-tab="backup" style="display:none;">
    <details open>
      <summary><span>ğŸ’¾ Backup / Export (firmensicher)</span><span class="pill">JSON â€¢ CSV â€¢ TXT</span></summary>
      <div class="sep"></div>
      <div class="hint">
        Empfehlung:
        <br>â€¢ <b>Backup.json</b> (alles inkl. Fotos) â†’ archivieren / importierbar
        <br>â€¢ <b>Material.csv</b> (intern) â†’ Excel/Software
        <br>â€¢ <b>Kunde.txt</b> / <b>Intern.txt</b> â†’ WhatsApp/Doku
      </div>
      <div class="sep"></div>
      <div class="btnbar">
        <button class="btn primary" id="btnBackup">â¬‡ï¸ Download Backup.json (alles)</button>
        <button class="btn" id="btnCSV">â¬‡ï¸ Download Material.csv (intern)</button>
        <button class="btn bad" id="btnReset">âš ï¸ Alle Daten lÃ¶schen (lokal)</button>
      </div>
    </details>
  </div>
</div>

<div id="toast" class="toast" style="display:none;"></div>

<script src="app.js"></script>
</body>
</html>
